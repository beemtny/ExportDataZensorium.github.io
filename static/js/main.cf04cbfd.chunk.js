(this["webpackJsonpexport-zensorium-data"]=this["webpackJsonpexport-zensorium-data"]||[]).push([[0],{36:function(e,t,a){e.exports=a(69)},41:function(e,t,a){},43:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),s=a.n(o),c=a(33),i=a(6),l=a(11),m=a(12),u=a(13),d=a(15),p=a(14),h=a(16),f=(a(41),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(l.a)({},r,n))},a.onLogin=function(e){e.preventDefault(),sessionStorage.setItem("token",a.state.password),a.props.history.push("/export")},a.state={password:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card cardLogin"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",{className:"card-title title alignCenter"},"Welcome to MineMind Project"),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted alignCenter"},"Please login"),r.a.createElement("form",{className:"form-group",onSubmit:this.onLogin},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleInputChange,name:"password",required:!0}),r.a.createElement("button",{className:"btn btn-light btn-lg btn-block login",type:"submit"},"Login")))))}}]),t}(r.a.Component)),b=a(7),g=a.n(b),E=(a(43),a(32)),v=a.n(E),x=a(10),N=a.n(x),D={exportCSVFile:function(e,t){var a="".concat(t,"_").concat(N()().format())+".csv"||!1,n=new Blob([e],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,a);else{var r=document.createElement("a");if(void 0!==r.download){var o=URL.createObjectURL(n);r.setAttribute("href",o),r.setAttribute("download",a),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}},S=a(17),y=a.n(S),C=function(e){return"https://info.minemind.net"+e},T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.getItem("token")&&a.setState({isLogin:!0}),e=y()().format().slice(0,-9),t.next=4,g.a.awrap(a.setState({fromDateTime:e,toDateTime:e}));case 4:case"end":return t.stop()}}))},a.onLogin=function(){a.props.history.push("/")},a.handleInputChange=function(e){var t,n,r;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.target,n=t.value,r=t.name,o.next=5,g.a.awrap(a.setState(Object(l.a)({},r,n)));case 5:case"end":return o.stop()}}))},a.onExport=function(e){var t,n,r,o,s,c,i;return g.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=a.state,n=t.measurement,r=t.fromDateTime,o=t.toDateTime,e.preventDefault(),c={fromDateTime:y.a.tz(r,"Asia/Bangkok").utc().format(),toDateTime:y.a.tz(o,"Asia/Bangkok").utc().format()},i=sessionStorage.getItem("token"),a.setState({isSending:!0}),l.prev=5,l.next=8,g.a.awrap(v.a.post(C("/zensoriumAPI/exportData/export".concat(n,"Data")),c,{headers:{authorization:"Bearer ".concat(i)}}));case 8:return s=l.sent,l.next=11,g.a.awrap(D.exportCSVFile(s.data,n));case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(5),a.setState({isSending:!1});case 16:a.setState({isSending:!1});case 17:case"end":return l.stop()}}),null,null,[[5,13]])},a.state={measurement:"",fromDateTime:"",toDateTime:"",isSending:!1,isLogin:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isSending,a=e.isLogin;return r.a.createElement("div",{className:"container"},t?r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"spinner-border text-light",role:"status"}),r.a.createElement("br",null),"Loading"):null,a?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Export"),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Form for export"),r.a.createElement("hr",null),r.a.createElement("form",{className:"card-text",onSubmit:this.onExport},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fromDateTime"},"Start Date & Time"),r.a.createElement("span",{className:"text-muted"}," ","(In time zone +07:00)"),r.a.createElement("input",{id:"fromDateTime",className:"form-control",type:"datetime-local",name:"fromDateTime",value:this.state.fromDateTime,max:this.state.toDateTime,required:!0,onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"toDateTime"},"End Date & Time"),r.a.createElement("span",{className:"text-muted"}," ","(In time zone +07:00)"),r.a.createElement("input",{id:"toDateTime",className:"form-control",type:"datetime-local",name:"toDateTime",required:!0,value:this.state.toDateTime,onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"Measurement"},"Measurement Data"),r.a.createElement("select",{className:"form-control",id:"Measurement",name:"measurement",onChange:this.handleInputChange,required:!0},r.a.createElement("option",{value:""}),r.a.createElement("option",null,"Step"),r.a.createElement("option",null,"Stress"),r.a.createElement("option",null,"Sleep"))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-warning btn-lg btn-block"},"Export")),r.a.createElement("div",{className:"text-muted pt-2"},"Note: Data is returned in UTC+00:00"))):r.a.createElement("div",{className:"filter"},"Please Login...",r.a.createElement("button",{className:"btn btn-light mt-3",onClick:this.onLogin},"Go Back")))}}]),t}(r.a.Component);s.a.render(r.a.createElement(c.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:f}),r.a.createElement(i.a,{path:"/export",component:T}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.cf04cbfd.chunk.js.map